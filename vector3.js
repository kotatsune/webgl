//================================================================================
//
//    vector3.js
//
//================================================================================


'use strict';


var Vec3 = {};


//--------------------------------------------------------------------------------
// ベクトルを作成します。
//--------------------------------------------------------------------------------
Vec3.create = function ( vec )
{
	var dest = new MatrixArray( 3 );

	if ( vec )
	{
		dest[ 0 ] = vec[ 0 ];
		dest[ 1 ] = vec[ 1 ];
		dest[ 2 ] = vec[ 2 ];
	}

	return dest;
};


//--------------------------------------------------------------------------------
// 零ベクトルを作成します。
//--------------------------------------------------------------------------------
Vec3.zero = function ()
{
	var dest = Vec3.create();

	dest[ 0 ] = 0;
	dest[ 1 ] = 0;
	dest[ 2 ] = 0;

	return dest;
};


//--------------------------------------------------------------------------------
// 要素を設定します。
//--------------------------------------------------------------------------------
Vec3.set = function ( vec, dest )
{
	if ( !dest )
	{
		dest = Vec3.create();
	}

	dest[ 0 ] = vec[ 0 ];
	dest[ 1 ] = vec[ 1 ];
	dest[ 2 ] = vec[ 2 ];

	return dest;
};


//--------------------------------------------------------------------------------
// 符号を反転します。
//--------------------------------------------------------------------------------
Vec3.negate = function ( vec, dest )
{
	if ( !dest )
	{
		dest = Vec3.create();
	}

	dest[ 0 ] = -vec[ 0 ];
	dest[ 1 ] = -vec[ 1 ];
	dest[ 2 ] = -vec[ 2 ];

	return dest;
};


//--------------------------------------------------------------------------------
// 加算します。
//--------------------------------------------------------------------------------
Vec3.add = function ( vec1, vec2, dest )
{
	if ( !dest )
	{
		dest = Vec3.create();
	}

	dest[ 0 ] = vec1[ 0 ] + vec2[ 0 ];
	dest[ 1 ] = vec1[ 1 ] + vec2[ 1 ];
	dest[ 2 ] = vec1[ 2 ] + vec2[ 2 ];

	return dest;
};


//--------------------------------------------------------------------------------
// 減算します。
//--------------------------------------------------------------------------------
Vec3.subtract = function ( vec1, vec2, dest )
{
	if ( !dest )
	{
		dest = Vec3.create();
	}

	dest[ 0 ] = vec1[ 0 ] - vec2[ 0 ];
	dest[ 1 ] = vec1[ 1 ] - vec2[ 1 ];
	dest[ 2 ] = vec1[ 2 ] - vec2[ 2 ];

	return dest;
};


//--------------------------------------------------------------------------------
// 拡大・縮小します。
//--------------------------------------------------------------------------------
Vec3.scale = function ( vec, a, dest )
{
	if ( !dest )
	{
		dest = Vec3.create();
	}

	dest[ 0 ] = vec[ 0 ] * a;
	dest[ 1 ] = vec[ 1 ] * a;
	dest[ 2 ] = vec[ 2 ] * a;

	return dest;
};


//--------------------------------------------------------------------------------
// 正規化します。
//--------------------------------------------------------------------------------
Vec3.normalize = function ( vec, dest )
{
	if ( !dest )
	{
		dest = Vec3.create();
	}

	var x = vec[ 0 ],
		y = vec[ 1 ],
		z = vec[ 2 ];

	var length = Math.sqrt( x * x + y * y + z * z );
	if ( !length )
	{
		dest[ 0 ] = 0;
		dest[ 1 ] = 0;
		dest[ 2 ] = 0;
	}
	else if ( length === 1 )
	{
		dest[ 0 ] = x;
		dest[ 1 ] = y;
		dest[ 2 ] = z;
	}
	else
	{
		var f = 1 / length;
		dest[ 0 ] = x * f;
		dest[ 1 ] = y * f;
		dest[ 2 ] = z * f;
	}

	return dest;
};


//--------------------------------------------------------------------------------
// 長さを算出します。
//--------------------------------------------------------------------------------
Vec3.length = function ( vec )
{
	var x = vec[ 0 ],
		y = vec[ 1 ],
		z = vec[ 2 ];

	return Math.sqrt( x * x + y * y + z * z );
};


//--------------------------------------------------------------------------------
// 長さ二乗を算出します。
//--------------------------------------------------------------------------------
Vec3.squaredLength = function ( vec )
{
	var x = vec[ 0 ],
		y = vec[ 1 ],
		z = vec[ 2 ];

	return x * x + y * y + z * z;
};


//--------------------------------------------------------------------------------
// ダンプします。
//--------------------------------------------------------------------------------
Vec3.dump = function ( vec )
{
	console.log( '( ' + vec[ 0 ] + ', ' + vec[ 1 ] + ', ' + vec[ 2 ] + ' )' );
};
